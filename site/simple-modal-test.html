<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .btn { 
            background: #007bff; color: white; padding: 10px 20px; 
            border: none; border-radius: 5px; cursor: pointer; margin: 10px;
        }
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.5); display: none; z-index: 1000;
        }
        .modal-content { 
            background: white; margin: 50px auto; padding: 30px; 
            border-radius: 10px; width: 300px; position: relative;
        }
        .modal-close { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 24px; cursor: pointer; }
        .hidden { display: none !important; }
        #debug-log { 
            background: #f5f5f5; padding: 15px; border: 1px solid #ddd; 
            margin: 20px 0; height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω</h1>
    
    <!-- –ö–Ω–æ–ø–∫–∞ "–ú–æ–∏ –Ω–∞–≥—Ä–∞–¥—ã" –∫–∞–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ—Ñ–∏–ª–µ -->
    <div class="menu-item" data-modal-target="rewards-modal" style="cursor: pointer; padding: 15px; background: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; margin: 10px 0;">
        <div class="menu-item-left">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <span class="menu-item-text" style="margin-left: 10px;">–ú–æ–∏ –Ω–∞–≥—Ä–∞–¥—ã</span>
        </div>
    </div>

    <!-- –î—Ä—É–≥–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <button class="btn" onclick="openModal('test-modal')">–¢–µ—Å—Ç –ø—Ä–æ—Å—Ç–æ–µ –æ–∫–Ω–æ</button>
    <button class="btn" onclick="testDiagnostics()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É</button>
    <button class="btn" onclick="testClick()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∞–≥—Ä–∞–¥</button>

    <!-- –ü—Ä–æ—Å—Ç–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="test-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('test-modal')">&times;</button>
            <h3>–ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫–Ω–æ</h3>
            <p>–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ, –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç!</p>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–≥—Ä–∞–¥ –∫–∞–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ -->
    <div id="rewards-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('rewards-modal')">&times;</button>
            <h3>üèÜ –ú–æ–∏ –Ω–∞–≥—Ä–∞–¥—ã</h3>
            <p>–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–≥—Ä–∞–¥ —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã–ª–æ—Å—å!</p>
            <p><strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong></p>
            <ul>
                <li>–í—Å–µ–≥–æ –æ—á–∫–æ–≤: 2,847</li>
                <li>–£—Ä–æ–≤–µ–Ω—å: 7 (–ó–≤–µ–∑–¥–Ω—ã–π –∫—É—Ä—å–µ—Ä)</li>
                <li>–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è: 1,653 –æ—á–∫–∞</li>
            </ul>
        </div>
    </div>

    <div id="debug-log">
        <strong>–õ–æ–≥ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:</strong><br>
        <span id="log-content">–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é...</span>
    </div>

    <script>
        let logCounter = 1;

        function addLog(message) {
            const logContent = document.getElementById('log-content');
            const timestamp = new Date().toLocaleTimeString();
            logContent.innerHTML += `<br>[${timestamp}] ${logCounter}. ${message}`;
            logCounter++;
            document.getElementById('debug-log').scrollTop = document.getElementById('debug-log').scrollHeight;
        }

        function openModal(modalId) {
            addLog(`–û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: ${modalId}`);
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                addLog(`‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ${modalId} —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã—Ç–æ`);
            } else {
                addLog(`‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ${modalId} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`);
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                addLog(`‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ${modalId} –∑–∞–∫—Ä—ã—Ç–æ`);
            }
        }

        function testDiagnostics() {
            addLog('=== –ù–ê–ß–ê–õ–û –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò ===');
            
            // –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å data-modal-target
            const modalTriggers = document.querySelectorAll('[data-modal-target]');
            addLog(`–ù–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å data-modal-target: ${modalTriggers.length}`);
            
            modalTriggers.forEach((trigger, index) => {
                addLog(`${index + 1}. –≠–ª–µ–º–µ–Ω—Ç: ${trigger.tagName}, —Å–µ–ª–µ–∫—Ç–æ—Ä: ${trigger.dataset.modalTarget}`);
                addLog(`   - –ö–ª–∞—Å—Å—ã: ${trigger.className}`);
                addLog(`   - –¢–µ–∫—Å—Ç: ${trigger.textContent.trim()}`);
            });

            // –ü–æ–∏—Å–∫ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            const modals = document.querySelectorAll('.modal-overlay');
            addLog(`–ù–∞–π–¥–µ–Ω–æ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω: ${modals.length}`);
            
            modals.forEach((modal, index) => {
                addLog(`${index + 1}. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ ID: ${modal.id}, —Å—Ç–∏–ª—å display: ${modal.style.display}`);
            });

            // –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
            const rewardsModal = document.getElementById('rewards-modal');
            addLog(`rewards-modal –Ω–∞–π–¥–µ–Ω: ${!!rewardsModal}`);
            if (rewardsModal) {
                addLog(`rewards-modal display: ${rewardsModal.style.display}`);
                addLog(`rewards-modal –∫–ª–∞—Å—Å: ${rewardsModal.className}`);
            }

            const rewardsButton = document.querySelector('[data-modal-target="rewards-modal"]');
            addLog(`–ö–Ω–æ–ø–∫–∞ –Ω–∞–≥—Ä–∞–¥ –Ω–∞–π–¥–µ–Ω–∞: ${!!rewardsButton}`);
            if (rewardsButton) {
                addLog(`–ö–Ω–æ–ø–∫–∞ –Ω–∞–≥—Ä–∞–¥ HTML: ${rewardsButton.outerHTML.substring(0, 100)}...`);
            }

            addLog('=== –ö–û–ù–ï–¶ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò ===');
        }

        function testClick() {
            addLog('–¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∞–≥—Ä–∞–¥...');
            const rewardsButton = document.querySelector('[data-modal-target="rewards-modal"]');
            if (rewardsButton) {
                addLog('‚úÖ –ö–Ω–æ–ø–∫–∞ –Ω–∞–π–¥–µ–Ω–∞, —Å–∏–º—É–ª–∏—Ä—É–µ–º –∫–ª–∏–∫...');
                rewardsButton.click();
                addLog('–ö–ª–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω');
            } else {
                addLog('‚ùå –ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', () => {
            addLog('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∑–∞–ø—É—Å–∫–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É...');
            setTimeout(testDiagnostics, 500);
        });

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å data-modal-target
        document.addEventListener('DOMContentLoaded', () => {
            const modalTriggers = document.querySelectorAll('[data-modal-target]');
            addLog(`–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è ${modalTriggers.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤...`);
            
            modalTriggers.forEach(trigger => {
                trigger.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = trigger.dataset.modalTarget;
                    addLog(`–ö–ª–∏–∫ –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä—É: ${target}`);
                    openModal(target);
                });
                addLog(`–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è: ${trigger.dataset.modalTarget}`);
            });
        });
    </script>
</body>
</html>