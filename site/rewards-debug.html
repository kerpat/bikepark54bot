<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –Ω–∞–≥—Ä–∞–¥</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .btn {
            background: #FF6B35;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
        }
        .debug-log {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã –Ω–∞–≥—Ä–∞–¥</h1>
        
        <h2>–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç:</h2>
        <button class="btn" onclick="testRewardsModal()">–¢–µ—Å—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –Ω–∞–≥—Ä–∞–¥</button>
        <button class="btn" onclick="testModalTriggers()">–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω</button>
        <button class="btn" onclick="checkElements()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã</button>
        
        <div id="debug-log" class="debug-log">
            –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...
        </div>

        <h2>–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:</h2>
        <div id="status-check">
            <p><strong>–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–≥—Ä–∞–¥:</strong> <span id="modal-status">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</span></p>
            <p><strong>–ö–Ω–æ–ø–∫–∞ –Ω–∞–≥—Ä–∞–¥ –≤ –º–µ–Ω—é:</strong> <span id="button-status">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</span></p>
            <p><strong>–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π:</strong> <span id="handler-status">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</span></p>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–≥—Ä–∞–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="rewards-modal-test" class="modal-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000;">
        <div class="modal-content" style="background: white; margin: 50px auto; padding: 30px; border-radius: 20px; width: 90%; max-width: 500px; position: relative;">
            <button class="modal-close" onclick="closeTestModal()" style="position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            <h2>üéÆ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä–∞–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç!</h2>
            <p>–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—à–Ω–æ –æ—Ç–∫—Ä—ã–ª–æ—Å—å.</p>
            <button class="btn" onclick="closeTestModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function testRewardsModal() {
            log('üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –Ω–∞–≥—Ä–∞–¥...');
            const modal = document.getElementById('rewards-modal-test');
            if (modal) {
                modal.style.display = 'flex';
                log('‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–π–¥–µ–Ω–æ –∏ –æ—Ç–∫—Ä—ã—Ç–æ');
                updateStatus('modal-status', '–ù–∞–π–¥–µ–Ω–æ', 'success');
            } else {
                log('‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
                updateStatus('modal-status', '–ù–µ –Ω–∞–π–¥–µ–Ω–æ', 'error');
            }
        }

        function testModalTriggers() {
            log('üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω...');
            
            // –ò—â–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Å data-modal-target
            const triggers = document.querySelectorAll('[data-modal-target]');
            log(`–ù–∞–π–¥–µ–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω: ${triggers.length}`);
            
            if (triggers.length > 0) {
                updateStatus('handler-status', '–ù–∞–π–¥–µ–Ω—ã', 'success');
                log('‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –Ω–∞–π–¥–µ–Ω—ã');
                triggers.forEach((trigger, index) => {
                    log(`–¢—Ä–∏–≥–≥–µ—Ä ${index + 1}: ${trigger.dataset.modalTarget} - ${trigger.textContent.trim()}`);
                });
            } else {
                updateStatus('handler-status', '–ù–µ –Ω–∞–π–¥–µ–Ω—ã', 'error');
                log('‚ùå –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
            }
        }

        function checkElements() {
            log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–≥—Ä–∞–¥
            const rewardsModal = document.getElementById('rewards-modal');
            if (rewardsModal) {
                log('‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ #rewards-modal –Ω–∞–π–¥–µ–Ω–æ');
                updateStatus('modal-status', '–ù–∞–π–¥–µ–Ω–æ', 'success');
            } else {
                log('‚ùå –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ #rewards-modal –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
                updateStatus('modal-status', '–ù–µ –Ω–∞–π–¥–µ–Ω–æ', 'error');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞–≥—Ä–∞–¥
            const rewardsButton = document.querySelector('[data-modal-target="rewards-modal"]');
            if (rewardsButton) {
                log('‚úÖ –ö–Ω–æ–ø–∫–∞ –Ω–∞–≥—Ä–∞–¥ –Ω–∞–π–¥–µ–Ω–∞');
                updateStatus('button-status', '–ù–∞–π–¥–µ–Ω–∞', 'success');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã
                log(`–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏: "${rewardsButton.textContent.trim()}"`);
                log(`data-modal-target: "${rewardsButton.dataset.modalTarget}"`);
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–ª–∏–∫
                const clickEvent = new MouseEvent('click', {
                    view: window,
                    bubbles: true,
                    cancelable: true
                });
                
                setTimeout(() => {
                    rewardsButton.dispatchEvent(clickEvent);
                    log('‚úÖ –ö–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∞–≥—Ä–∞–¥');
                }, 500);
                
            } else {
                log('‚ùå –ö–Ω–æ–ø–∫–∞ –Ω–∞–≥—Ä–∞–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                updateStatus('button-status', '–ù–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
            }
        }

        function updateStatus(elementId, status, type) {
            const element = document.getElementById(elementId);
            const colors = {
                'success': '#22c55e',
                'error': '#ef4444',
                'warning': '#f59e0b'
            };
            element.textContent = status;
            element.style.color = colors[type] || '#000';
        }

        function closeTestModal() {
            const modal = document.getElementById('rewards-modal-test');
            if (modal) {
                modal.style.display = 'none';
                log('üîí –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã—Ç–æ');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('load', () => {
            log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            updateStatus('modal-status', '–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏', 'warning');
            updateStatus('button-status', '–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏', 'warning');
            updateStatus('handler-status', '–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏', 'warning');
        });
    </script>
</body>
</html>